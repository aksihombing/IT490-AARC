<VirtualHost www.aarc.com:80>

    ServerAdmin webmaster@localhost
    ServerName www.aarc.com
    DocumentRoot /var/www/aarc

    ErrorLog ${APACHE_LOG_DIR}/aarc_error.log
    CustomLog ${APACHE_LOG_DIR}/aarc_access.log combined



    <IfModule mod_cache.c>
        # checks if mod_cache is enabled
    CacheQuickHandler off
    CacheLock on
        #prevents multiple requests to the same uncached resource
    CacheLockPath /tmp/mod_cache-lock
        #temp file for CacheLock
    CacheIgnoreHeaders Set-Cookie
        #Set-Cookie can sometimes prevent caching


    <IfModule mod_cache_disk.c>
        CacheRoot /var/cache/apache2/mod_cache_disk
    #directory for cached files
        CacheEnable disk /search.php
        # tells apache which URLs should be cached
        CacheDefaultExpire 3600
    #1 hour
        CacheMaxExpire 86400
    #1 day
        CacheHeader on            # enables X-Cache/Age headers
    </IfModule>
    </IfModule>


    <IfModule mod_headers.c>
            <Files "search.php">
        Header unset Set-Cookie
        Header set Cache-Control "max-age=3600, public"
        Header unset Pragma
        # Pragma is an older caching behavior; tells browsers to “not cache response; grab a fresh copy”
        Header unset Expires
        #not sure is this is necessary yet. Expires header might conflict with Cache-Control supposedly.

        # optional: add X-Cache fallback just in case(mod_cache will override when HIT)
        # Header set X-Cache "MISS" env=!CACHE_HIT
    # Header set X-Cache "HIT" env=CACHE_HIT

            </Files>


                        <Files "index.php">
        Header unset Set-Cookie
        Header set Cache-Control "max-age=3600, public"
        Header unset Pragma
        # Pragma is an older caching behavior; tells browsers to “not cache response; grab a fresh copy”
        Header unset Expires
        #not sure is this is necessary yet. Expires header might conflict with Cache-Control supposedly.

        # optional: add X-Cache fallback just in case(mod_cache will override when HIT)
        # Header set X-Cache "MISS" env=!CACHE_HIT
    # Header set X-Cache "HIT" env=CACHE_HIT

            </Files>
    </IfModule>

</VirtualHost>
